<html>

<form method="POST" action="/upload" enctype="multipart/form-data">
    <input type="file" name="archivo" accept=".txt,.tsv" required>
    <button type="submit">Subir archivo</button>
</form>

<div id="explorador">
    <button onclick="cargarDirectorio('')">Ra√≠z</button>
    <div id="contenido-archivos"></div>
</div>

<script>
function cargarDirectorio(ruta) {
    fetch(`/explorar?ruta=${encodeURIComponent(ruta)}`)
        .then(response => response.json())
        .then(archivos => {
            let html = '<ul>';
            archivos.forEach(archivo => {
                if (archivo.es_directorio) {
                    html += `<li onclick="cargarDirectorio('${ruta}/${archivo.nombre}')">üìÅ ${archivo.nombre}</li>`;
                } else {
                    html += `<li onclick="seleccionarArchivo('${ruta}/${archivo.nombre}')">üìÑ ${archivo.nombre}</li>`;
                }
            });
            html += '</ul>';
            document.getElementById('contenido-archivos').innerHTML = html;
        });
}

function seleccionarArchivo(ruta) {
    alert(`Archivo seleccionado: ${ruta}`);
    // Aqu√≠ puedes hacer algo con el archivo seleccionado
}
</script>